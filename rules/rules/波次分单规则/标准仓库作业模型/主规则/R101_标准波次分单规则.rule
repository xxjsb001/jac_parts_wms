$待分单集 = 待分单集

//排序
列表对象排序($待分单集, "优先级", "升序")
// 开始拣选分配
返回列表 = 创建列表()
$分单结果集 = 创建列表()
每个($分单 : $待分单集){
  	如果(待分单数量 ==0){
		$分单.分单数量 = 0
	}
	如果(待分单数量>0&&待分单数量<$分单.计划数量){
		$分单.分单数量 = 待分单数量
		待分单数量 = 0
	}
	如果(待分单数量>0&&待分单数量>=$分单.计划数量){
		$分单.分单数量 = $分单.计划数量
		待分单数量 = 待分单数量 -$分单.分单数量
	}
	加入列表(返回列表, $分单)
}
