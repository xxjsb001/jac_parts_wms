返回列表 = 创建列表()
如果(类型 == "收货上架" || 类型 == "库内移位" || 类型 == "补货移位"){
	R101_按工作区生成作业单规则()
}

如果(类型 == "发货拣货"){
	R101_按单拣货作业单生成规则()
}

如果(类型 == "加工拣货"){
	R101_按工作区生成作业单规则()
}

如果(类型 == "波次拣货" && 作业模式 == "按单"){
	R101_按单拣货作业单生成规则()
}

如果(类型 == "波次拣货" && 作业模式 == "批拣"){
	R101_按工作区生成作业单规则()
}



获取工作区(任务){
	$工作区序号=空
	$工作区集 = 数据查询("R101_工作区数据源", "库区编码", 任务.移出库区编码)
	如果($工作区集 == 空) {
		异常("库区:[" + $任务.移出库区编码 + "], 没有设置对应的工作区")
	}
	每个($工作区 : $工作区集.工作区) {
		$工作区定位集 = 多值查表("R101_基础数据_工作区定位表", $工作区.库区编码, $工作区.工作区编码)
		
		如果($工作区定位集 == 空) {
			异常("库区:[" + $工作区.库区编码+ "]," + "工作区:[" +$工作区.工作区编码+ "], 没有设置对应的工作区定位")
		}
		每个($工作区定位 : $工作区定位集) {
			$区区间集 = 分解列表($工作区定位.区区间)
			$区区间对象 = 赋值($区区间集, "开始值", "结束值")	
				
			$排区间集 = 分解列表($工作区定位.排区间)
			$排区间对象 = 赋值($排区间集, "开始值", "结束值")
			如果(任务.移出区 >= $区区间对象.开始值 && 任务.移出区 <= $区区间对象.结束值) {
				如果(任务.移出排 >= $排区间对象.开始值 && 任务.移出排 <= $排区间对象.结束值) {
					$工作区序号 = $工作区.工作区序号
				}
			}
		}
	}
	工作区序号=$工作区序号
}